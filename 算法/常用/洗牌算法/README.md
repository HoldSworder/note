# 洗牌算法

当我们需要打乱一个数组的顺序的时候，有这么几种方法

1. sort
```js
Array.sort(function() {
  return 0.5 - Math.random()
})
```
>v8 在处理 sort 方法时，使用了插入排序和快排两种方案。当目标数组长度小于10时，使用插入排序；反之，使用快排。<br>其实不管用什么排序方法，大多数排序算法的时间复杂度介于 O(n) 到 O(n2) 之间，元素之间的比较次数通常情况下要远小于 n(n-1)/2，也就意味着有一些元素之间根本就没机会相比较（也就没有了随机交换的可能），这些 sort 随机排序的算法自然也不能真正随机。 <br>通俗的说，其实我们使用 array.sort 进行乱序，理想的方案或者说纯乱序的方案是：数组中每两个元素都要进行比较，这个比较有 50% 的交换位置概率。如此一来，总共比较次数一定为 n(n-1)。<br>而在 sort 排序算法中，大多数情况都不会满足这样的条件。因而当然不是完全随机的结果了。


2. lodash.shuffle

3. 洗牌算法

### 原理

将数组以从后往前的顺序 将未处理的最后一位 与随机产生的位置进行交换
```js
[1,2,3,4,5] => [1,5,3,4,2] => [1,5,4,3,2]

```

```js
function shuffle(arr) {
  let m = arr.length, //未交换的最后一位
      t,  //缓存数据
      i //随机数
  
  while(m) {
    m --
    i = Math.floor(Math.random() * m)
    t = arr[i]
    arr[i] = arr[m]
    arr[m] = t
  }

  return arr
}
```
